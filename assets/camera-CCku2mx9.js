import{a as i,p as e,w as T}from"./chunk-B7RQU5TL-xj-QjgGV.js";import{W as F}from"./react-webcam-Cv0vQhem.js";import{u as B}from"./CameraSettingsContext-BDn7_6_x.js";import{C as D}from"./CameraSettings-DIau3yjd.js";function L({className:u=""}){var v,f,N,k,w,C,I,S,E;const l=i.useRef(null),[p,A]=i.useState(null),[o,R]=i.useState(null),[m,y]=i.useState(!1),[b,x]=i.useState(null),[a,z]=i.useState({capabilities:null,settings:null,constraints:null}),{settings:r}=B(),g={width:r.videoConstraints.width,height:r.videoConstraints.height,facingMode:r.videoConstraints.facingMode},j=i.useCallback(async()=>{try{const t=await navigator.mediaDevices.getUserMedia({video:g}),s=t.getVideoTracks()[0];if(s){const d=s.getCapabilities(),c=s.getSettings(),h=s.getConstraints();z({capabilities:d,settings:c,constraints:h}),t.getTracks().forEach(n=>n.stop())}}catch(t){console.error("Error getting camera info:",t)}},[g]),M=i.useCallback(async()=>{if(l.current){y(!0),x(null);try{await new Promise(s=>setTimeout(s,r.focusDelay*1e3));const t=l.current.getScreenshot({width:r.videoConstraints.width,height:r.videoConstraints.height});if(t){A(t);const s=new Image;s.onload=()=>{const d=document.createElement("canvas"),c=d.getContext("2d");if(c){d.width=s.width,d.height=s.height,c.drawImage(s,0,0);const h=d.toDataURL(r.screenshotFormat,r.screenshotQuality),n=Math.round((h.length-22)*3/4);R({format:r.screenshotFormat,dimensions:`${s.width} x ${s.height}`,size:n>1024?`${(n/1024).toFixed(1)} KB`:`${n} bytes`})}},s.src=t}}catch(t){x("Error al capturar la imagen"),console.error("Error capturing image:",t)}finally{y(!1)}}},[r]);return e.jsxs("div",{className:`space-y-6 ${u}`,children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Información de la Cámara"}),e.jsx("button",{onClick:j,className:"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors duration-200",children:"Actualizar Info"})]}),a.capabilities?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Resoluciones Soportadas"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Ancho:"}),e.jsxs("span",{className:"ml-2 text-gray-900 dark:text-white",children:[(v=a.capabilities.width)==null?void 0:v.min," - ",(f=a.capabilities.width)==null?void 0:f.max," px"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Alto:"}),e.jsxs("span",{className:"ml-2 text-gray-900 dark:text-white",children:[(N=a.capabilities.height)==null?void 0:N.min," - ",(k=a.capabilities.height)==null?void 0:k.max," px"]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Configuración Actual"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Resolución:"}),e.jsxs("span",{className:"ml-2 text-gray-900 dark:text-white",children:[(w=a.settings)==null?void 0:w.width," x ",(C=a.settings)==null?void 0:C.height]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Cámara:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:((I=a.settings)==null?void 0:I.facingMode)==="environment"?"Trasera":"Frontal"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"FPS:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:((S=a.settings)==null?void 0:S.frameRate)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Dispositivo:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:(E=a.settings)!=null&&E.deviceId?"ID: "+a.settings.deviceId.substring(0,8)+"...":"N/A"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Capacidades Adicionales"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Zoom:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:a.capabilities.zoom?"Soportado":"No soportado"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Enfoque:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:a.capabilities.focusMode?"Soportado":"No soportado"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Balance de Blancos:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:a.capabilities.whiteBalanceMode?"Soportado":"No soportado"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Exposición:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:a.capabilities.exposureMode?"Soportado":"No soportado"})]})]})})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:'Haz clic en "Actualizar Info" para obtener información de la cámara'}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors duration-200",children:"Obtener Información"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx(D,{showTitle:!0,showResetButton:!0})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Vista Previa"}),b&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-200 rounded-md",children:b}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{ref:l,audio:!1,videoConstraints:g,className:"w-full h-auto rounded-lg",style:{maxHeight:"60vh"},onUserMediaError:t=>{x("Error al acceder a la cámara. Verifica los permisos."),console.error("Webcam error:",t)}}),m&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),e.jsx("p",{children:"Enfocando..."})]})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:M,disabled:m,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors duration-200",children:m?"Enfocando...":"Tomar Foto"})})]}),p&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Foto Capturada"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:p,alt:"Captured",className:"w-full h-auto rounded-lg",style:{maxHeight:"60vh"}}),o&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-900 dark:text-white",children:"Información de la Imagen"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Formato:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:o.format})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Dimensiones:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:o.dimensions})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Tamaño:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:o.size})]})]})]})]})]})]})}function $({}){return[{title:"Cámara - React Webcam Explorer"},{name:"description",content:"Página de prueba para funcionalidades de react-webcam con configuración avanzada"}]}const V=T(function(){return e.jsxs("div",{className:"min-h-screen pb-20",style:{backgroundColor:"var(--color-background)"},children:[e.jsxs("div",{className:"shadow-sm border-b px-4 py-4",style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)"},children:[e.jsx("h1",{className:"text-xl font-semibold",style:{color:"var(--color-text-primary)"},children:"📷 Prueba de Cámara"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--color-text-secondary)"},children:"Configuración avanzada para captura de fotos con react-webcam"})]}),e.jsx("div",{className:"p-4",children:e.jsx(L,{})}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-3",style:{color:"var(--color-text-primary)"},children:"Instrucciones de Uso"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-2",style:{backgroundColor:"var(--color-accent)"}}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Configura los parámetros de la cámara según tus necesidades"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-2",style:{backgroundColor:"var(--color-accent)"}}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Ajusta el delay de enfoque para obtener mejores resultados"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-2",style:{backgroundColor:"var(--color-accent)"}}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Ideal para capturar pantallas de notebook con celular para OCR"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-2",style:{backgroundColor:"var(--color-accent)"}}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:'Desactiva "Image Smoothing" para mantener bordes más definidos'})]})]})]})]})});export{V as default,$ as meta};
